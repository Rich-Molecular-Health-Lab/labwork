"Note the calibration results shown on the screen."
),
element  = elements$qubit_standards
),
list(
step     = "Prepare the Qubit 4 Fluorometer for sample readings.",
note     = NULL,
substeps = list(
"Press Run samples.",
"On the assay screen, use the + and - buttons until the screen reads 1.",
"From the unit dropdown menu, select µL."
),
element  = tagList(NULL)
),
list(
step     = "Perform sample readings (repeat this for each sample).",
note     = "The top value (in large font) is the concentration of the original sample. The bottom value is the dilution concentration.",
substeps = list(
"Insert a sample tube into the sample chamber, close the lid, then press Read tube.",
"When the reading is complete (~3 seconds), remove the sample tube.",
"Record the values on the screen."
),
element  = elements$qubit_samples
)
) %>% set_names(seq_len(length(.))) %>%
map_at(c(1, "substeps"), modify_if(!is.null(.), set_names(., letters[seq_along(.)])))
name_substeps <- function(x) {
if (!is.null(x)) {
set_names(x, letters[seq_along(x)])
} else {
return(x)
}
steps <- list(
list(
step     = "Set up the required number of assay tubes (or tube strips) for 2 standards + N samples.",
note     = "Use thin-wall, clear, 0.5-mL PCR tubes (Cat. No. Q32856) for the Qubit™ 4 Fluorometer.",
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Label the tube **lids** with sample tubes beginning at 3.",
note     = "Do not label the side of the tube as this could interfere with the sample read.",
substeps = list("Calibration of the Qubit™ Fluorometer requires the standards to be inserted into the instrument in the right order, so **Standard 1 and Standard 2 should be Tube 1 and Tube 2, respectively**."),
element  = tagList(reactableOutput("qcTubes"))
),
list(
step     = "Add 10 µL of each Qubit™ standard to the appropriate tube (Tube 1 and Tube 2).",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Add 1 μL of each sample to a tube, beginning with Tube 3.",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Prepare an aliquot of the Qubit™ 1X dsDNA working solution and add to each tube.",
note     = "You will need 380 µL for both standards + 1 µL per sample. Always prepare an extra 2 µL of working solution to account for pipetting error.",
substeps = list(
"Add 190 µL to each tube of standard (Tube 1 and Tube 2).",
"Add 199 µL to each sample tube (beginning with Tube 3)."
),
element  = tagList(
value_box(id       = "working_solution",
theme    = "bg-success",
showcase = bsicons::bs_icon("calculator"),
title    = "Aliquot Working Volume of:",
value    = textOutput("vol_working_solution"))
)
),
list(
step     = "Mix each sample vigorously by vortexing for 3–5 seconds",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Incubate at room temperature for 2 minutes.",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Prepare the Qubit 4 Fluorometer for reading results.",
note     = NULL,
substeps = list(
"Press DNA on the Home screen.",
"Select 1X dsDNA HS as the assay type.",
"Press Read Standards to proceed."
),
element  = tagList(NULL)
),
list(
step     = "Calibrate the Qubit 4 Fluorometer.",
note     = "If you just recently calibrated using the same standards in this protocol, you can skip this step.",
substeps = list(
"Insert the tube containing Standard 1 into the sample chamber, close the lid, then press Read standard. ",
"When the reading is complete (~3 seconds), remove Standard 1. ",
"Insert the tube containing Standard 2 into the sample chamber, close the lid, then press Read standard. ",
"When the reading is complete (~3 seconds), remove Standard 2.",
"Note the calibration results shown on the screen."
),
element  = elements$qubit_standards
),
list(
step     = "Prepare the Qubit 4 Fluorometer for sample readings.",
note     = NULL,
substeps = list(
"Press Run samples.",
"On the assay screen, use the + and - buttons until the screen reads 1.",
"From the unit dropdown menu, select µL."
),
element  = tagList(NULL)
),
list(
step     = "Perform sample readings (repeat this for each sample).",
note     = "The top value (in large font) is the concentration of the original sample. The bottom value is the dilution concentration.",
substeps = list(
"Insert a sample tube into the sample chamber, close the lid, then press Read tube.",
"When the reading is complete (~3 seconds), remove the sample tube.",
"Record the values on the screen."
),
element  = elements$qubit_samples
)
) %>% set_names(seq_len(length(.))) %>%
map_at(c(1, "substeps"), \(x) name_substeps(x))
View(steps)
name_substeps <- function(x) {
if (!is.null(x)) {
set_names(x, letters[seq_along(x)])
} else {
return(x)
}
steps <- list(
list(
step     = "Set up the required number of assay tubes (or tube strips) for 2 standards + N samples.",
note     = "Use thin-wall, clear, 0.5-mL PCR tubes (Cat. No. Q32856) for the Qubit™ 4 Fluorometer.",
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Label the tube **lids** with sample tubes beginning at 3.",
note     = "Do not label the side of the tube as this could interfere with the sample read.",
substeps = list("Calibration of the Qubit™ Fluorometer requires the standards to be inserted into the instrument in the right order, so **Standard 1 and Standard 2 should be Tube 1 and Tube 2, respectively**."),
element  = tagList(reactableOutput("qcTubes"))
),
list(
step     = "Add 10 µL of each Qubit™ standard to the appropriate tube (Tube 1 and Tube 2).",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Add 1 μL of each sample to a tube, beginning with Tube 3.",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Prepare an aliquot of the Qubit™ 1X dsDNA working solution and add to each tube.",
note     = "You will need 380 µL for both standards + 1 µL per sample. Always prepare an extra 2 µL of working solution to account for pipetting error.",
substeps = list(
"Add 190 µL to each tube of standard (Tube 1 and Tube 2).",
"Add 199 µL to each sample tube (beginning with Tube 3)."
),
element  = tagList(
value_box(id       = "working_solution",
theme    = "bg-success",
showcase = bsicons::bs_icon("calculator"),
title    = "Aliquot Working Volume of:",
value    = textOutput("vol_working_solution"))
)
),
list(
step     = "Mix each sample vigorously by vortexing for 3–5 seconds",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Incubate at room temperature for 2 minutes.",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Prepare the Qubit 4 Fluorometer for reading results.",
note     = NULL,
substeps = list(
"Press DNA on the Home screen.",
"Select 1X dsDNA HS as the assay type.",
"Press Read Standards to proceed."
),
element  = tagList(NULL)
),
list(
step     = "Calibrate the Qubit 4 Fluorometer.",
note     = "If you just recently calibrated using the same standards in this protocol, you can skip this step.",
substeps = list(
"Insert the tube containing Standard 1 into the sample chamber, close the lid, then press Read standard. ",
"When the reading is complete (~3 seconds), remove Standard 1. ",
"Insert the tube containing Standard 2 into the sample chamber, close the lid, then press Read standard. ",
"When the reading is complete (~3 seconds), remove Standard 2.",
"Note the calibration results shown on the screen."
),
element  = elements$qubit_standards
),
list(
step     = "Prepare the Qubit 4 Fluorometer for sample readings.",
note     = NULL,
substeps = list(
"Press Run samples.",
"On the assay screen, use the + and - buttons until the screen reads 1.",
"From the unit dropdown menu, select µL."
),
element  = tagList(NULL)
),
list(
step     = "Perform sample readings (repeat this for each sample).",
note     = "The top value (in large font) is the concentration of the original sample. The bottom value is the dilution concentration.",
substeps = list(
"Insert a sample tube into the sample chamber, close the lid, then press Read tube.",
"When the reading is complete (~3 seconds), remove the sample tube.",
"Record the values on the screen."
),
element  = elements$qubit_samples
)
) %>% set_names(seq_len(length(.))) %>%
lmap_at(c(1, "substeps"), \(x) name_substeps(x))
View(steps)
name_substeps <- function(x) {
if (!is.null(x)) {
set_names(x, letters[seq_along(x)])
} else {
return(x)
}
steps <- list(
list(
step     = "Set up the required number of assay tubes (or tube strips) for 2 standards + N samples.",
note     = "Use thin-wall, clear, 0.5-mL PCR tubes (Cat. No. Q32856) for the Qubit™ 4 Fluorometer.",
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Label the tube **lids** with sample tubes beginning at 3.",
note     = "Do not label the side of the tube as this could interfere with the sample read.",
substeps = list("Calibration of the Qubit™ Fluorometer requires the standards to be inserted into the instrument in the right order, so **Standard 1 and Standard 2 should be Tube 1 and Tube 2, respectively**."),
element  = tagList(reactableOutput("qcTubes"))
),
list(
step     = "Add 10 µL of each Qubit™ standard to the appropriate tube (Tube 1 and Tube 2).",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Add 1 μL of each sample to a tube, beginning with Tube 3.",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Prepare an aliquot of the Qubit™ 1X dsDNA working solution and add to each tube.",
note     = "You will need 380 µL for both standards + 1 µL per sample. Always prepare an extra 2 µL of working solution to account for pipetting error.",
substeps = list(
"Add 190 µL to each tube of standard (Tube 1 and Tube 2).",
"Add 199 µL to each sample tube (beginning with Tube 3)."
),
element  = tagList(
value_box(id       = "working_solution",
theme    = "bg-success",
showcase = bsicons::bs_icon("calculator"),
title    = "Aliquot Working Volume of:",
value    = textOutput("vol_working_solution"))
)
),
list(
step     = "Mix each sample vigorously by vortexing for 3–5 seconds",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Incubate at room temperature for 2 minutes.",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Prepare the Qubit 4 Fluorometer for reading results.",
note     = NULL,
substeps = list(
"Press DNA on the Home screen.",
"Select 1X dsDNA HS as the assay type.",
"Press Read Standards to proceed."
),
element  = tagList(NULL)
),
list(
step     = "Calibrate the Qubit 4 Fluorometer.",
note     = "If you just recently calibrated using the same standards in this protocol, you can skip this step.",
substeps = list(
"Insert the tube containing Standard 1 into the sample chamber, close the lid, then press Read standard. ",
"When the reading is complete (~3 seconds), remove Standard 1. ",
"Insert the tube containing Standard 2 into the sample chamber, close the lid, then press Read standard. ",
"When the reading is complete (~3 seconds), remove Standard 2.",
"Note the calibration results shown on the screen."
),
element  = elements$qubit_standards
),
list(
step     = "Prepare the Qubit 4 Fluorometer for sample readings.",
note     = NULL,
substeps = list(
"Press Run samples.",
"On the assay screen, use the + and - buttons until the screen reads 1.",
"From the unit dropdown menu, select µL."
),
element  = tagList(NULL)
),
list(
step     = "Perform sample readings (repeat this for each sample).",
note     = "The top value (in large font) is the concentration of the original sample. The bottom value is the dilution concentration.",
substeps = list(
"Insert a sample tube into the sample chamber, close the lid, then press Read tube.",
"When the reading is complete (~3 seconds), remove the sample tube.",
"Record the values on the screen."
),
element  = elements$qubit_samples
)
) %>% set_names(seq_len(length(.))) %>%
map_depth(1, \(x) lmap_at(x, "substeps", name_substeps))
View(steps)
name_substeps <- function(x) {
if (!is.null(x)) {
map_depth(x, 1, \(y) set_names(y, letters[seq_along(y)]))
} else {
return(x)
}
steps <- list(
list(
step     = "Set up the required number of assay tubes (or tube strips) for 2 standards + N samples.",
note     = "Use thin-wall, clear, 0.5-mL PCR tubes (Cat. No. Q32856) for the Qubit™ 4 Fluorometer.",
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Label the tube **lids** with sample tubes beginning at 3.",
note     = "Do not label the side of the tube as this could interfere with the sample read.",
substeps = list("Calibration of the Qubit™ Fluorometer requires the standards to be inserted into the instrument in the right order, so **Standard 1 and Standard 2 should be Tube 1 and Tube 2, respectively**."),
element  = tagList(reactableOutput("qcTubes"))
),
list(
step     = "Add 10 µL of each Qubit™ standard to the appropriate tube (Tube 1 and Tube 2).",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Add 1 μL of each sample to a tube, beginning with Tube 3.",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Prepare an aliquot of the Qubit™ 1X dsDNA working solution and add to each tube.",
note     = "You will need 380 µL for both standards + 1 µL per sample. Always prepare an extra 2 µL of working solution to account for pipetting error.",
substeps = list(
"Add 190 µL to each tube of standard (Tube 1 and Tube 2).",
"Add 199 µL to each sample tube (beginning with Tube 3)."
),
element  = tagList(
value_box(id       = "working_solution",
theme    = "bg-success",
showcase = bsicons::bs_icon("calculator"),
title    = "Aliquot Working Volume of:",
value    = textOutput("vol_working_solution"))
)
),
list(
step     = "Mix each sample vigorously by vortexing for 3–5 seconds",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Incubate at room temperature for 2 minutes.",
note     = NULL,
substeps = list(NULL),
element  = tagList(NULL)
),
list(
step     = "Prepare the Qubit 4 Fluorometer for reading results.",
note     = NULL,
substeps = list(
"Press DNA on the Home screen.",
"Select 1X dsDNA HS as the assay type.",
"Press Read Standards to proceed."
),
element  = tagList(NULL)
),
list(
step     = "Calibrate the Qubit 4 Fluorometer.",
note     = "If you just recently calibrated using the same standards in this protocol, you can skip this step.",
substeps = list(
"Insert the tube containing Standard 1 into the sample chamber, close the lid, then press Read standard. ",
"When the reading is complete (~3 seconds), remove Standard 1. ",
"Insert the tube containing Standard 2 into the sample chamber, close the lid, then press Read standard. ",
"When the reading is complete (~3 seconds), remove Standard 2.",
"Note the calibration results shown on the screen."
),
element  = elements$qubit_standards
),
list(
step     = "Prepare the Qubit 4 Fluorometer for sample readings.",
note     = NULL,
substeps = list(
"Press Run samples.",
"On the assay screen, use the + and - buttons until the screen reads 1.",
"From the unit dropdown menu, select µL."
),
element  = tagList(NULL)
),
list(
step     = "Perform sample readings (repeat this for each sample).",
note     = "The top value (in large font) is the concentration of the original sample. The bottom value is the dilution concentration.",
substeps = list(
"Insert a sample tube into the sample chamber, close the lid, then press Read tube.",
"When the reading is complete (~3 seconds), remove the sample tube.",
"Record the values on the screen."
),
element  = elements$qubit_samples
)
) %>% set_names(seq_len(length(.))) %>%
map_depth(1, \(x) lmap_at(x, "substeps", name_substeps))
View(steps)
source("~/GitRepos/richlab_main/labwork/LibraryPrep/modules/materials.R")
View(kits)
kit <- keep_at(kits, "dsDNAqubit")
View(kit)
kit <- keep_at(kits, "dsDNAqubit") %>% list_flatten(name_spec = "{outer}")
View(kit)
kit <- keep_at(kits, "dsDNAqubit") %>% list_flatten(name_spec = "{inner}")
View(kit)
kit <- keep_at(kits, "dsDNAqubit") %>%
list_flatten(name_spec = "{inner}")
reagents <- kit$contents
View(reagents)
source("~/GitRepos/richlab_main/labwork/LibraryPrep/modules/module.R")
source("~/GitRepos/richlab_main/labwork/GlobalScripts/global.R")
?reactiveValue
?shiny
?getReactableState
?updateReactable
?numericInput
?getReactableState
?enframe
?slice
?month
?year
?bs_theme
bootswatch_themes()
?page_fluid
?accordion
?accordion_panel
?card
?renderText
?accordion_panel_set
source("~/GitRepos/richlab_main/labwork/LibraryPrep/modules/protocols/materials.R")
source("~/GitRepos/richlab_main/labwork/LibraryPrep/modules/protocols/list_protocols.R")
View(protocols)
str(protocols)
test <- keep_at(protocols, "rapid16s") %>%
list_flatten(name_spec = "{inner}")
View(test)
test <- keep_at(protocols, "rapid16s") %>%
list_flatten(name_spec = "{inner}") %>% enframe()
View(test)
print(test)
test <- keep_at(protocols, "rapid16s") %>%
list_flatten(name_spec = "{inner}") %>%
compact() %>% enframe()
View(test)
shiny::runApp('LibraryPrep')
conflicted::conflicts_prefer(pander::p)
global            <- config::get(config = "default")
shiny::runApp('LibraryPrep')
runApp('LibraryPrep')
source("~/GitRepos/richlab_main/labwork/GlobalScripts/global_setup.R")
getwd()
install.packages("devtools")
devtools::install_github("martinctc/surveytoolbox")
install.packages("devtools")
library(here)
shiny::runApp('LibraryPrep')
runApp('LibraryPrep')
here()
file.exists("GlobalScripts/global_setup.R")
runApp('LibraryPrep')
file.exists("GlobalScripts/global_setup.R")
shiny::runApp('LibraryPrep')
runApp('LibraryPrep')
traceback()
runApp('LibraryPrep')
traceback()
?bs_theme
runApp('LibraryPrep')
?accordion_panel
runApp('LibraryPrep')
shiny::runApp('LibraryPrep')
