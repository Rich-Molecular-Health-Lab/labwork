"0","compilation <- read.csv(path$compilation_csv, header = T)      %>% "
"0","  filter(str_starts(SampleID, ""\\w+"") & str_starts(SequenceID, ""\\w+"") & Pooled.Library.Code != ""#N/A"") %>% "
"0","  mutate(SampleID   = str_squish(str_trim(SampleID  , ""both"")),"
"0","         ExtractID  = str_squish(str_trim(ExtractID , ""both"")),"
"0","         SequenceID = str_squish(str_trim(SequenceID, ""both""))) %>% "
"0","  select(-c(ExtractDate:SampleBox)) %>%"
"0","  left_join(extracts, by = join_by(ExtractID)) %>% distinct() %>%"
"0","  mutate(SampleSet      = paste(params$sampleset),"
"0","         LibraryTube    = as.integer(LibraryTube),"
"0","         LibPrepDate    = ymd(str_remove_all(str_trim(Run.ID, ""both""), ""MIN_16_|MIN_16-"")),"
"0","         strands        = 2,"
"0","         fragment_type  = 0,"
"0","         Length         = 1500,"
"0","         InputMassStart = 10,"
"0","         SampVolPool    = round(as.numeric(Volume.Added.to.Pool..uL.), 0),) %>%"
"0","  mutate(LibPrepWorkflow = if_else(str_detect(Kit, ""LSK""), ""lsk16s"", ""rapid16s"")) %>%"
"0","  mutate(TemplateVolPrep = if_else(LibPrepWorkflow == ""lsk"", 47, 15),"
"0","         PoolSamples     = ""yes"","
"0","         InputMassFinal  = 50,"
"0","         LibraryCode     = Pooled.Library.Code) %>%"
"0","  mutate(TotalPoolVol = sum(SampVolPool), .by = LibraryCode) %>%"
"0","  mutate(BeadVol = TotalPoolVol * 0.6) %>%"
"0","  select(LibraryTube,"
"0","         ExtractID,"
"0","         SampleID,"
"0","         LibraryBarcode,"
"0","         ExtractConc,"
"0","         SampleSet,"
"0","         LibraryCode,"
"0","         SequenceID,"
"0","         LibPrepDate,"
"0","         LibPrepWorkflow,"
"0","         LibPrepKit = Kit,"
"0","         FlowCellType   = Flow.Cell.Type,"
"0","         FlowCellSerial = Flow.Cell.ID,"
"0","         SeqDevice = Sequencer,"
"0","         strands,"
"0","         fragment_type,"
"0","         Length,"
"0","         InputMassStart,"
"0","         TemplateVolPrep,"
"0","         PoolSamples,"
"0","         SampVolPool,"
"0","         TotalPoolVol,"
"0","         BeadVol,"
"0","         InputMassFinal,"
"0","         Conc_QC2 = Final.Library.Concentration) %>%"
"0","  arrange(ExtractID, SequenceID)  %>% distinct() "
"2","Warning: Detected an unexpected many-to-many relationship between `x` and `y`."
